#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main() {
    FILE *fp;
    int i, length;
    char line[50], arr[10];

    fp = fopen("objectcode.txt", "r");
    if (fp == NULL) {
        perror("Error opening file");
        return 1;
    }

    if (fscanf(fp, "%s", line) == 1) {
        printf("Program name is: ");
        for (i = 2; i < 8 && line[i] != '\0'; i++) {
            printf("%c", line[i]);
        }
        printf("\n");
    }

    while (fscanf(fp, "%s", line) == 1) {
        if (line[0] == 'T') {
            strncpy(arr, line + 2, 6);
            arr[6] = '\0';
            length = atoi(arr);
            i = 12;

            while (line[i] != '\0') {
                if (line[i] != '^') {
                    printf("%d :\t %c%c\n", length, line[i], line[i + 1]);
                    length++;
                    i += 2;
                } else {
                    i++;
                }
            }
        } else if (line[0] == 'E') {
            break;
        }
    }

    fclose(fp);
    return 0;
}
